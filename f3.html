<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Maternal & Child Tracker</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="f3.css">
</head>
<body>

<header>
  <h1>‡¶Æ‡¶æ‡¶§‡ßÉ‡¶§‡ßç‡¶¨ ‡¶ì ‡¶∂‡¶ø‡¶∂‡ßÅ‡¶∞ ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞</h1>
  <div class="header-buttons">
      <button onclick="window.history.back()">‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</button>
      <button onclick="logout()">‡¶≤‡¶ó ‡¶Ü‡¶â‡¶ü</button>
</div>
</header>

<main>
<section>
<h2>ü§∞ ‡¶ó‡¶∞‡ßç‡¶≠‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï ‡¶ó‡¶æ‡¶á‡¶°‡¶≤‡¶æ‡¶á‡¶®</h2>
<label for="preg-week">‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
<input type="number" id="preg-week" min="1" max="40" placeholder="1-40">
<button onclick="showPregGuideline()">‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
<p id="preg-guideline"></p>
</section>
<section>
<h2>üíâ ‡¶ü‡¶ø‡¶ï‡¶æ‡¶¶‡¶æ‡¶® ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶ì ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ (‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤)</h2>
<label for="vaccine-name">‡¶ü‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ:</label>
<input type="text" id="vaccine-name" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: BCG">
<label for="vaccine-date">‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
<input type="date" id="vaccine-date">
<button onclick="addVaccine()">‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
<ul id="vaccine-list"></ul>
</section>
<section>
<h2>üóìÔ∏è ‡¶∂‡¶ø‡¶∂‡ßÅ‡¶∞ ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶ü‡¶ø‡¶ï‡¶æ ‡¶∏‡ßÇ‡¶ö‡¶ø</h2>
<label for="birthdate">‡¶∂‡¶ø‡¶∂‡ßÅ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Æ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</label>
<input type="date" id="birthdate">
<button onclick="generateVaccineSchedule()">‡¶ü‡¶ø‡¶ï‡¶æ ‡¶∏‡ßÇ‡¶ö‡¶ø ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
<ul id="auto-vaccine-list"></ul>
</section>
<section>
<h2>üçº ‡¶∂‡¶ø‡¶∂‡ßÅ‡¶∞ ‡¶ì‡¶ú‡¶® ‡¶ì ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï</h2>
<label for="child-age">‡¶¨‡ßü‡¶∏ (‡¶Æ‡¶æ‡¶∏):</label>
<input type="number" id="child-age" min="0" placeholder="‡¶Æ‡¶æ‡¶∏‡ßá">
<label for="child-weight">‡¶ì‡¶ú‡¶® (‡¶ï‡ßá‡¶ú‡¶ø):</label>
<input type="number" step="0.1" id="child-weight" placeholder="‡¶ï‡ßá‡¶ú‡¶ø">
<label for="child-height">‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ (‡¶∏‡ßá‡¶Æ‡¶ø):</label>
<input type="number" step="0.1" id="child-height" placeholder="‡¶∏‡ßá‡¶Æ‡¶ø">
<button onclick="addChildData()">‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>

<table>
<thead>
<tr>
<th>‡¶¨‡ßü‡¶∏ (‡¶Æ‡¶æ‡¶∏)</th><th>‡¶ì‡¶ú‡¶® (‡¶ï‡ßá‡¶ú‡¶ø)</th><th>‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ (‡¶∏‡ßá‡¶Æ‡¶ø)</th>
</tr>
</thead>
<tbody id="child-table"></tbody>
</table>

<canvas id="childChart"></canvas>
</section>
</main>

<script>
function showPregGuideline(){
  const week=document.getElementById('preg-week').value;
  const guideline=document.getElementById('preg-guideline');
  if(week>=1 && week<=40){ 
    guideline.textContent=`‡¶Ü‡¶™‡¶®‡¶ø ${week} ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π‡ßá‡¶∞ ‡¶ó‡¶∞‡ßç‡¶≠‡ßá ‡¶Ü‡¶õ‡ßá‡¶®‡•§ ‡¶®‡¶ø‡ßü‡¶Æ‡¶ø‡¶§ ‡¶°‡¶æ‡¶ï‡ßç‡¶§‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶™‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø ‡¶®‡¶ø‡¶®‡•§`; 
  }
  else guideline.textContent="‡ßß ‡¶•‡ßá‡¶ï‡ßá ‡ß™‡ß¶ ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§";
}

function addVaccine(){
  const name=document.getElementById('vaccine-name').value;
  const date=document.getElementById('vaccine-date').value;
  const list=document.getElementById('vaccine-list');
  if(name && date){
    const li=document.createElement('li');
    li.textContent=`${name} - ${date}`;
    list.appendChild(li);
    document.getElementById('vaccine-name').value='';
    document.getElementById('vaccine-date').value='';
    const today=new Date();
    const vacDate=new Date(date);
    const diffDays=Math.floor((vacDate-today)/(1000*60*60*24));
    if(diffDays===0) alert(`‡¶Ü‡¶ú ${name} ‡¶ü‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®!`);
    else if(diffDays>0 && diffDays<=3) alert(`${name} ‡¶ü‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ${diffDays} ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∏‡¶Æ‡ßü ‡¶Ü‡¶∏‡¶õ‡ßá‡•§`);
  } else alert("‡¶ü‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶â‡¶≠‡ßü‡¶á ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
}

const vaccines = [
  {name: "BCG", month:0},
  {name: "HepB-1", month:0},
  {name: "OPV-0", month:0},
  {name: "DTP/HepB/Hib-1", month:6},
  {name: "OPV-1", month:6},
  {name: "DTP/HepB/Hib-2", month:10},
  {name: "OPV-2", month:10},
  {name: "DTP/HepB/Hib-3", month:14},
  {name: "OPV-3", month:14},
  {name: "Measles-1", month:9},
  {name: "Measles-2", month:15},
];

function generateVaccineSchedule(){
  const birthdateInput = document.getElementById('birthdate').value;
  const list = document.getElementById('auto-vaccine-list');
  list.innerHTML = '';
  if(!birthdateInput){ alert("‡¶ú‡¶®‡ßç‡¶Æ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶¶‡¶ø‡¶®‡•§"); return; }
  const birthDate = new Date(birthdateInput);
  vaccines.sort((a,b) => a.month - b.month);
  vaccines.forEach((vaccine,index)=>{
    const vacDate = new Date(birthDate);
    vacDate.setMonth(vacDate.getMonth() + vaccine.month);
    const li=document.createElement('li');
    li.textContent=`${index+1}. ${vaccine.name} - ${vacDate.toLocaleDateString('bn-BD')}`;
    list.appendChild(li);
  });
}

let childData={age:[],weight:[],height:[]};
let chart;

function addChildData(){
  const age=document.getElementById('child-age').value;
  const weight=document.getElementById('child-weight').value;
  const height=document.getElementById('child-height').value;
  const table=document.getElementById('child-table');
   if(age && weight && height){
    const row=table.insertRow();
    row.insertCell(0).textContent=age;
    row.insertCell(1).textContent=weight;
    row.insertCell(2).textContent=height;
    childData.age.push(age); childData.weight.push(weight); childData.height.push(height);
    updateChart();
    document.getElementById('child-age').value='';
    document.getElementById('child-weight').value='';
    document.getElementById('child-height').value='';
  } else alert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
}

function updateChart(){
  const ctx=document.getElementById('childChart').getContext('2d');
  if(chart) chart.destroy();
  chart=new Chart(ctx,{
    type:'line',
    data:{
      labels:childData.age,
      datasets:[
        {label:'‡¶ì‡¶ú‡¶® (‡¶ï‡ßá‡¶ú‡¶ø)',data:childData.weight,borderColor:'#ff7f50',backgroundColor:'rgba(255,127,80,0.2)',tension:0.3},
        {label:'‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ (‡¶∏‡ßá‡¶Æ‡¶ø)',data:childData.height,borderColor:'#ff5722',backgroundColor:'rgba(255,87,34,0.2)',tension:0.3}
      ]
    },
    options:{responsive:true, plugins:{legend:{position:'top'}}, scales:{x:{title:{display:true,text:'‡¶¨‡ßü‡¶∏ (‡¶Æ‡¶æ‡¶∏)'}},y:{title:{display:true,text:'‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£'}}}}
  });
}
</script>
<script>
    function logout(){
      localStorage.clear();
      window.location.href = 'login.html';
    }
  </script>

</body>
</html>